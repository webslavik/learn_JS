<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lesson 10 - classwork</title>
</head>
<body>

  <input id='btn' type="button" value='AJAX button'>
  <div id='output'></div>

  <script>

    // I want use .forEach(), but this DOSN'T work correctyly
    //----------------------------------------
    // var xhr = new XMLHttpRequest();
    // var arr = ['1.html', '2.html'];
    //
    // getId('btn').onclick = function() {
    //
    //   arr.forEach(function(name) {
    //     xhr.open('GET', name);
    //     xhr.send();
    //     xhr.onreadystatechange = function() {
    //       if(xhr.readyState == 4 && xhr.status == 200) {
    //         getId('output').innerHTML += xhr.responseText;
    //       }
    //     }
    //   });

    getId('btn').onclick = function() {
      var xhr1 = new XMLHttpRequest();
      var xhr2 = new XMLHttpRequest();

      xhr1.open('GET', '1.html');
      xhr2.open('GET', '2.html');

      xhr1.send();
      xhr2.send();

      xhr1.onreadystatechange = function() {
        if(xhr1.readyState == 4 && xhr1.status == 200) {
          getId('output').innerHTML += xhr1.responseText;

          xhr2.onreadystatechange = function() {
            if(xhr2.readyState == 4 && xhr2.status == 200) {
              getId('output').innerHTML += xhr2.responseText;
            }
          }
        }
      }
    }


    function getId(name) {
      return document.getElementById(name);
    }



  </script>

</body>
</html>
